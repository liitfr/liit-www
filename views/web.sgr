extends(src="pages.sgr")
  block(name="meta")
    title Quelles technologies pour votre site web ? | LIIT
    meta(name="description" content="Une recette id√©ale : la JAMstack pour construire des sites puissants, fiables et s√©curis√©s.")
    meta(name="robots" content="index, follow")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")

  block(name="main")
    h1 Go Static ! ü§ò
    p "The simpler you make things, the richer the experience becomes." Il n'y a aucune raison d'avoir un CMS massif et lourd avec une base de donn√©es lorsque vous pourriez avoir un site statique rapide, s√©curis√© et beau. Mais comment pouvez-vous d√©cider si un site statique vous convient ?
    h2 Vous valorisez la s√©curit√©
    p Vous souvenez-vous de quand date la derni√®re fois o√π vous avez mis √† jour votre CMS et vos plugins? Selon une estimation, 70% de toutes les installations de WordPress sont vuln√©rables aux attaques classiques. En 2014, des millions de sites Drupal √©taient vuln√©rables en raison d'un bug dans le code, et Drupal a d√©clar√© aux utilisateurs que, s'ils n'avaient pas mis √† jour leur version dans les 7 heures suivant l'annonce, ils devraient supposer que ces derniers avaient fait l'objet d'un piratage. 7 heures, c'est tr√®s court ...
    p Avec un site statique, vous n'avez plus √† vous soucier de l'injection de code malveillant sur votre site ou du piratage de votre base de donn√©es. Les sites statiques sont construits sur un ordinateur (cela peut √™tre le v√¥tre) par des g√©n√©rateurs de sites statiques, qui consument vos entrants pour produire des fichiers HTML, CSS et JavaScript. Lorsqu'un utilisateur demande √† consulter une page de votre site, le serveur lui envoie directement le fichier concern√©, au lieu de g√©n√©rer cette page √† la vol√©e. "Aucun processus de construction" signifie qu'aucun piratage standard comme les scripts ou les "exploits" de s√©curit√© de la base de donn√©es ne peut fonctionner.
    h2 Vous valorisez la vitesse
    p Que fait votre navigateur lorsque vous visitez un site ? Il rend le HTML, le CSS et le JavaScript dans un format visible par l'homme. Quel que soit le type de site que vous poss√©dez, un site dynamique ou un syst√®me de g√©n√©ration statique moderne, ce qui est envoy√© par le serveur √† votre navigateur reste du HTML, du CSS et du JavaScript. Point.
    p Alors, pourquoi perdre du temps et gaspiller les ressources n√©cessaires pour g√©n√©rer votre site √† chaque fois que quelqu'un le visite quand vous pourriez avoir une version pr√©-construite de celui-ci, pr√™te √† √™tre utilis√©e ? Un site statique normal h√©berg√© sur un CDN (Content Delivery Network) est souvent 10 fois plus rapide pour l'√©mission du premier octet qu'un site construit avec un CMS ...
    p De plus, en h√©bergeant votre site statique sur un CDN, vous pouvez le servir √† partir de n'importe quel n≈ìud le plus proche de vos utilisateurs. Quelqu'un qui regarde votre site dans un caf√© √† Paris recevra les donn√©es d'un serveur europ√©en, et pas d'une ferme de serveurs dans la Silicon Valley. Il en va de m√™me pour vos visiteurs japonais ou un utilisateur juste en bas de la rue.
    p Gardez en t√™te qu‚Äôun chargement rapide de vos pages signifie un renforcement de l‚Äôimplication ("user engagement") de vos visiteurs, une augmentation du nombre de pages consult√©es et du taux de conversion.
    p Cet aspect est √©galement important dans le domaine de l‚Äôoptimisation pour les moteurs de  recherche (SEO). Google et ses concurrents accordent une importance significative et positive √† ce crit√®re pour le calcul du positionnement de vos pages.
    h2 La flexibilit√©
    p Votre site construit avec WordPress ou Drupal commence souvent comme une solution √† "taille unique" qui est ensuite enrichie en ajoutant des plugins. Beaucoup de plugins. S√©rieusement ... tellement de plugins ... Une recherche rapide sur Google pour conna√Ætre "les plugins WordPress essentiels" retourne une page o√π neuf r√©sultats sur dix ont pour titre "20 plugins dont vous ne pourrez plus vous passer" ...
    p
      | Avec un site statique, vous pourrez rester √©pur√© et concentr√© ("lean and mean"), gr√¢ce √† un outil qui fait exactement ce dont vous avez besoin. Vous aimez bloguer ? Essayez Jekyll ou Hugo. Vous voulez un site de marketing haute performance ? Faites comme les pros et utilisez  Middleman ou&nbsp;
      strong Spike
      |. Vous essayez de mettre en avant votre portfolio ? Peut-√™tre que Cactus sera fait pour vous. Vous souhaitez une solution simple et cependant finement param√©trable ? Jetez un ≈ìil √† Metalsmith et ses nombreux plugins.
    h2 L'agilit√©
    p Votre installation WordPress (surtout si vous l'h√©bergez vous-m√™me) est un monstre de Frankenstein qui ressemble probablement √† ceci :
    ul
      li Une machine qui ex√©cute "votre distribution pr√©f√©r√©e" (sic) de Linux
      li Un serveur Web ex√©cutant Nginx ou Apache
      li PHP avec ses extensions associ√©es et ses configurations de serveur Web
      li MySQL
      li WordPress (√©videmment)
      li Tous les plugins dont vous aurez besoin (voir n ¬∞ 3)
      li Vos templates et th√®mes
    p Si vous ne souhaitez g√©rer votre h√©bergement, il faudra croiser les doigts pour que votre  prestataire conserve son architecture (PHP et MySQL) √† jour, de sorte que vous ne soyez jamais expos√© aux vuln√©rabilit√©s qui apparaissent de temps en temps. Ensuite, il y a la maintenance... Il faudra vous assurer d'avoir allou√© le temps n√©cessaire pour g√©rer toutes ces d√©pendances.
    p Et m√™me un peu plus de temps au cas o√π un plugin ou un th√®me mis √† jour viendrait √† d√©grader  quelque chose ...
    p Un site statique, lorsqu'il a √©t√© g√©n√©r√©, peut √™tre h√©berg√© sur n'importe quel serveur Web capable de renvoyer des fichiers HTML (ce qui vous offre toute une gamme d'options). Vous voudrez certainement exploiter au maximum les possibilit√©s qui sont offertes avec un site statique en  trouvant un h√¥te qui permet des fonctionnalit√©s telles que le d√©ploiement continu, l'invalidation instantan√©e du cache, les d√©ploiements automatiques et plus encore.
    p Bien s√ªr, toutes ces pr√©occupations peuvent √™tre d√©l√©gu√©es √† un prestataire, et au lieu d'installer, g√©rer et mettre √† jour votre CMS, vous pourrez focaliser votre attention sur l‚Äôessentiel :  l'√©laboration du contenu et du design de votre site.
    h2 La fiabilit√©
    noscript
      img(src="/img/pages/web/database-error-620-250.png" alt="Message d'erreur lors de la tentative de connexion √† la base de donn√©es : 'Error establishing a database connection'" style="width: 100%; display: block; margin: 20px auto;")
    img.lazyload(src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAAABCAQAAADJaToDAAAAEklEQVR42mNkGAWjYBSMgmEGAAmyAAIP6oLXAAAAAElFTkSuQmCC" alt="Message d'erreur lors de la tentative de connexion √† la base de donn√©es : 'Error establishing a database connection'" style="width: 100%; display: block; margin: 20px auto;" data-src="/img/pages/web/database-error-620-250.png")
    p Est-ce que ce message vous semble familier (et douloureux) ? Si vous avez r√©ussi √† l'√©viter avec votre propre site jusqu'√† pr√©sent ... alors f√©licitations, vous √™tes dans une entreprise rare ! De toute √©vidence, en travaillant avec un site statique, et donc sans base de donn√©es, vous ne serez (plus)  jamais confront√© √† cela.
    p Mais la fiabilit√© du site statique va bien au-del√† des erreurs de base de donn√©es. La beaut√© derri√®re  le fait de servir des pages HTML pr√©-g√©n√©r√©es est qu‚Äôelles peuvent √™tre h√©berg√©es n'importe o√π et partout, en utilisant un CDN (Content Delivery Network).
    p Disons qu'il y a une attaque DDoS (attaque par d√©ni de service) sur le serveur o√π votre CMS est h√©berg√©. D√©sol√©, mais vous pourriez √™tre cuit pendant quelques heures (ou pire, jours). Que se passera-t-il si cette m√™me attaque frappe un n≈ìud o√π votre site statique est h√©berg√© ? Plus de soucis, celui-ci sera alors servi √† partir du prochain n≈ìud le plus proche et vos visiteurs ne se rendront m√™me pas compte qu'il y a un probl√®me.
    h2 Le contr√¥le de version
    p Il est tout √† fait possible de concevoir un site statique sur votre ordinateur, puis de le t√©l√©charger sur un serveur (que ce soit via un outil en ligne de commande ou par une interface graphique de glisser-d√©poser), mais la plupart des d√©veloppeurs finissent par utiliser un de syst√®me de gestion de version comme Git.
    p Si vous √™tes d√©veloppeur, alors vous connaissez certainement d√©j√† combien ces outils peuvent vous sauver la mise dans certaines circonstances, et ceci reste vrai lorsqu'il s'agit de projets Web. Ils permettent de revenir en arri√®re vers une version ant√©rieure stable si par erreur quelque chose d√©raillait.
    p Certains h√©bergeurs proposent m√™me des fonctionnalit√©s permettant de passer d‚Äôune version de votre site √† une autre en quelques clics seulement (Netlify par exemple).
    h2 L'exp√©rience de d√©veloppement
    p L‚Äôautre beaut√© derri√®re l'utilisation d'un g√©n√©rateur de site Web statique est aussi dans l'exp√©rience de d√©veloppement. Les outils de "build" qui g√©n√®rent votre code HTML incluent presque tous un serveur Web local, qui vous permettra de v√©rifier vos progr√®s au fur et √† mesure de vos d√©veloppements, en temps r√©el.
    p De cette mani√®re l‚Äôactivit√© du d√©veloppeur est acc√©l√©r√©e puisqu‚Äôil a directement la certitude que ce qu‚Äôil r√©alise correspond aux attendus sp√©cifi√©s. Il visualise en direct le site de la m√™me fa√ßon que les visiteurs le verront une fois que celui-ci aura √©t√© d√©ploy√©.
    h2 "Scalabilit√©" et rendement d'√©chelle
    p Imaginez ... √áa y est ! Votre site est devenu viral, et vous observez une adh√©sion massive et un nombre accru de visites gr√¢ce √† votre pr√©sence sur les m√©dias sociaux.
    p Peut-√™tre aviez-vous anticip√© que cela se produirait un jour, en ayant d√®s le d√©part pr√©vu les choses en grand ? Vous payez depuis longtemps de gros volumes de bande passante, en esp√©rant (ou en craignant !) une future explosion des visites ?
    p Ou au contraire vous n‚Äôavez jamais vraiment cru que cette situation serait possible un jour, et aujourd‚Äôhui vous multipliez les appels fr√©n√©tiques aupr√®s de votre fournisseur de services pour le sortir du lit ou de table parce que votre plan ne pouvait pas g√©rer ce niveau de trafic, et que c‚Äôest votre domaine tout entier qui est en rade ...
    p √âvidement : cette augmentation du trafic implique l‚Äôaugmentation du nombre d‚Äôex√©cution de traitements complexes lanc√©s sur votre serveur √† chaque visite. Cette croissance va vous frapper l√† o√π √ßa fait mal: au porte-monnaie.
    p Avec un site statique, l'√©volutivit√© reste un probl√®me mineur ! Un nombre accru de requ√™tes signifie plus de pages servies, mais aucun traitement suppl√©mentaire n√©cessaire lors de la construction de ces pages.
    p Avec certains fournisseurs, cette mont√©e en charge est int√©gr√©e dans votre forfait, tandis qu'avec d'autres (comme Amazon S3), vous ne payez que ce que vous consommez.
    h2 H√©bergement et prix
    p Avec un site statique, si la majorit√© des traitements a lieu sur votre machine de production (qui par ailleurs peut √™tre votre ordinateur) durant la phase de construction, alors que vous restera-t-il √† payer ?
    p Globalement, rien d‚Äôautre que du stockage de fichier. C‚Äôest-√†-dire : pas grand-chose ! Vous pouvez alors d√©penser votre argent l√† o√π cela compte vraiment : sur les fonctionnalit√©s qui rendent votre site plus rapide et votre vie plus facile.
    p Des fonctionnalit√©s telles que les d√©ploiements atomiques et la gestion des versions de vos fichiers vous assureront que votre site est en permanence √† jour chez tous vos visiteurs, ou encore l'int√©gration avec Git et les d√©ploiements automatiques.
    p De cette mani√®re votre site inclut instantan√©ment et en permanence vos derni√®res modifications,  chacune de ses versions faisant l‚Äôobjet d‚Äôune "photographie" qui rendra possible le fait de revenir en arri√®re en cas de probl√®me.
    p Alors, qu'est-ce qui pourrait vous emp√™cher de passer dans le monde du Web statique? Le processus de migration vous para√Æt trop intimidant ? Pas de panique ! De nombreux outils comme Jekyll ont la possibilit√© d'importer vos anciens messages WordPress. Il existe aussi des moyens vous permettant de continuer l‚Äôexploitation de votre base de donn√©es back-end !
    p Peu importe les technologies et langages avec lesquels vous pr√©f√©rez d√©velopper : que ce soit Node, Ruby, Python ou autre, il existe un outil de g√©n√©ration fait pour vous.
    p Il n'a jamais √©t√© meilleur moment pour profiter de la rapidit√©, de la s√©curit√© et de la fiabilit√© des g√©n√©rateurs de sites Web statiques (SSG pour "Static Site Generator") et des environnements de d√©veloppement qui les entourent.
    p Alors, n‚Äôattendez plus !
    h2 Pour conclure
    p Maintenant, vous savez pourquoi il vaut mieux laisser de c√¥t√© les technologies dynamiques, destin√©es aux applications transactionnelles (telles que les applications de gestion, aux nombreuses entr√©es / sorties) ou aux applications temps r√©el complexes (telles que Facebook o√π la recompilation √† chaque nouvel √©v√©nement n‚Äôest √©videment pas envisageable).
    p Dans cette r√©flexion entre site statique / site dynamique, il s‚Äôagit en r√©alit√© d‚Äôidentifier le chemin critique entre le temps de (re)compilation ‚Äì totale ou id√©alement atomique ‚Äì d‚Äôun site statique lors de sa phase de "build" et le temps de g√©n√©ration de la page √† la vol√©e suite √† la requ√™te d‚Äôun visiteur sur un site dynamique.
    p Smashing Magazine, en choisissant une nouvelle version statique de leur site (comprenant des milliers d‚Äôarticles et plusieurs dizaines de milliers de commentaires), a permis de r√©duire par 10 les temps d‚Äôacc√®s aux premiers octets ; en passant de 800ms √† 80ms.
    p L'explosion des appareils mobiles a chang√© le visage du Web de plusieurs fa√ßons. De plus en plus de visiteurs surfent sur le Web √† partir d'un appareil mobile, souvent sur une connexion 3G. Jamais la performance n'a √©t√© aussi importante qu'aujourd'hui.
    p
      | Saviez-vous que&nbsp;
      strong 57% des visiteurs en ligne abandonneront leur navigation sur une page si elle n√©cessite plus de 3 secondes pour s‚Äôafficher
      | &nbsp;? Les gens √©taient encore dispos√©s √† attendre jusqu'√† 10 secondes il y a quelques ann√©es, mais les exigences sont aujourd'hui beaucoup plus √©lev√©es. Sur un mobile, attendre qu'un site Web se soit charg√© peut √™tre tellement frustrant que plus de 4% des personnes avouent avoir un jour jet√© leur t√©l√©phone en attendant qu‚Äôun site mobile lent s‚Äôaffiche enfin ...
    p Peu importe √† quel point vous optimiserez votre site Web dynamique et combien de milliers d‚ÄôEuros vous consacrerez √† cette t√¢che, il ne vous donnera jamais la m√™me garantie de performance de base qu'un site statique bien d√©fini, et directement h√©berg√© sur un CDN pour seulement quelques Euros par mois.
    h2 Et pour rester √† la page
    h3 La "JAM Stack"
    p Adopter les conseils qui viennent de vous √™tre pr√©sent√©s revient souvent √† choisir la d√©marche ¬´JAM¬ª.
    ul
      li J pour JavaScript : Toute programmation dynamique du cycle de requ√™te / r√©ponse est g√©r√©e par JavaScript, et donc ex√©cut√©e enti√®rement sur le client. Cela peut √™tre par l‚Äôinterm√©diaire de n‚Äôimporte quelle librairie, framework front-end ou encore simplement avec du code "vanilla"
      li A pour API : Les processus c√¥t√© serveur tels que les actions sur bases de donn√©es sont interfac√©s par des API r√©utilisables (ou des services Cloud), accessibles via HTTP avec JavaScript. Il peut s‚Äôagir d‚ÄôAPI personnalis√©es tout comme il peut s‚Äôagit de services tiers. Par exemple : consulter les 10 articles suivants de votre blog, envoyer un message via le formulaire de contact, passer une commande et payer en ligne, utiliser le moteur de recherche interne du site ...
      li M pour Markup : Le balisage HTML doit √™tre pr√©-construit au moment du d√©ploiement, g√©n√©ralement √† l‚Äôaide d‚Äôun g√©n√©rateur de site pour les sites de contenu ou un outil de cr√©ation d‚Äôapplications Web.
    h3 Le protocole HTTP/2
    p HTTP/2 est la nouvelle version du protocole HTTP qui rendra vos applications plus rapides, plus simples et plus robustes - une combinaison rare ;-) - en vous permettant d‚Äô√©viter d‚Äôavoir √† impl√©menter au niveau applicatif des solutions de contournement historiques (tels que les bundles, les sprites, ...) li√©es √† des limitations intrins√®ques au protocole, et de r√©pondre √† ces pr√©occupations dans la couche de transport elle-m√™me.
    p Il ne s'agit pas d'une r√©√©criture totale du protocole; Les m√©thodes HTTP, les codes d'√©tat et la s√©mantique sont identiques, et il devrait normalement √™tre possible de passer d‚Äôune version du protocole √† l‚Äôautre de fa√ßon totalement transparente. Les principaux objectifs du HTTP/2 sont de r√©duire la latence en :
    ul
      li Activant le multiplexage complet des requ√™tes et des r√©ponses
      li Minimisant le poids des √©changes gr√¢ce √† une compression des en-t√™tes HTTP
      li Transmettant les donn√©es en binaire et plus en mode texte pour limiter les risques d‚Äôerreur
      li Ajoutant le support des priorisations de requ√™tes et le "push" serveur.
    p D√©sormais gr√¢ce √† ce dernier point, le serveur sera en mesure d‚Äôenvoyer l‚Äôensemble des ressources r√©f√©renc√©es dans une m√™me page (CSS, JS...), avant m√™me que le navigateur n‚Äôait analys√© celle-ci.
    h3 Progressive Web Applications (PWA)
    p Les applications Web progressives apportent une "Exp√©rience Utilisateur" (UX) similaire √† celle des applications natives disponibles sur les "App Stores". Elles sont :
    ul
      li
        | Fiables : Elles se chargent instantan√©ment et ne montrent jamais le "downasaur", m√™me dans des conditions de r√©seau instables ou inexistantes.
        noscript
          img(src="/img/pages/web/google-chrome-dinosaure-554-227.png" alt="Le T-Rex Chrome : Impossible de se connecter √† Internet." style="width: 100%; display: block; margin: 20px auto;")
        img.lazyload(src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAioAAAABCAQAAABazU3kAAAAEklEQVR42mNkGAWjYBSMAioCAAiqAAIrxfE1AAAAAElFTkSuQmCC" alt="Le T-Rex Chrome : Impossible de se connecter √† Internet." style="width: 100%; display: block; margin: 20px auto;" data-src="/img/pages/web/google-chrome-dinosaure-554-227.png")
        | Ceci est rendu possible par l‚Äôutilisation de Service Workers (cf. chapitre suivant)
      li Puissantes : La rapidit√© est la clef ! Comme nous l‚Äôavons vu, 53% des utilisateurs abandonnent un site s'il faut plus de 3 secondes pour le charger. Et une fois charg√©, ils s‚Äôattendent √† ce que l‚Äôapplication soit rapide comme l‚Äô√©clair. Les interactions comme le scrolling ou les actions tactiles doivent rester fluides, sans jamais exp√©rimenter de "Jank" (saccades, blocages, ou autres ralentissements)
      li Immersives : Elles donnent √† l‚Äôutilisateur la sensation d‚Äôutiliser une application native. Les  applications Web progressives sont installables sans avoir besoin d'utiliser un "App Store", elles poss√®dent leur propre ic√¥ne et sont directement accessibles sur l'√©cran d'accueil de l'utilisateur. Elles offrent une exp√©rience immersive gr√¢ce au mode plein-√©cran et peuvent m√™me r√©-impliquer et relancer les utilisateurs gr√¢ce aux notifications Push Web. En s‚Äôabonnant explicitement aux notifications d‚Äôun site, l‚Äôutilisateur autorise ce dernier √† lui envoyer des alertes, y compris lorsqu‚Äôil n‚Äôest pas en train de le visiter. Les notifications Push Web s‚Äôaffichent alors sur son bureau ou sur l‚Äô√©cran d‚Äôaccueil de son smartphone. Des messages qui peuvent √™tre hyper cibl√©s, en fonction de ses go√ªts, de son exp√©rience, ou de son parcours. Cette fonctionnalit√© repr√©sente l‚Äôavenir de la fid√©lisation et supplantera  progressivement le mailing marketing. Plus globalement, l‚Äôexp√©rience PWA am√©liore la satisfaction de vos utilisateurs, favorise leur engagement et augmente le taux de conversion.
    p Ci-dessous, trois exemples prouvant cet effet de levier :
      ol
        li. Les notifications Push Web ont aid√© eXtra Electronics √† augmenter l'engagement par 4. Leurs utilisateurs passent maintenant deux fois plus de temps sur leur site.
        li. Les Service Workers ont permis √† Konga de r√©duire de 84 % la quantit√© de donn√©e impliqu√©e lors de la premi√®re transaction.
        li AliExpress a vu son taux de conversion des nouveaux utilisateurs augmenter de 104%. Les visites durent 74 % plus longtemps et deux fois plus de pages sont visit√©es en moyenne lors d‚Äôune session.
    h3 Les Service Workers
    p Les Service Workers sont √©crits en JavaScript et agissent en arri√®re-plan sur le navigateur de votre visiteur. Ils permettent en autres de r√©gir la mise en cache des ressources, pour garantir de futures visites ultra-rapides ainsi que le maintient d‚Äôune exp√©rience utilisateur en mode d√©connect√©.
    p Ils proposent √©galement des fonctionnalit√©s telles que la synchronisation r√©guli√®re des ressources en t√¢che de fond, et les "Push Notifications" abord√©es pr√©c√©demment dans ce document.
    p Il peut aussi s‚Äôagir de "Geofencing", ou en d‚Äôautres termes de la technologie qui permet d'envoyer des notifications aux utilisateurs lors de leur entr√©e ou de leur d√©part d'une zone g√©ographique donn√©e.
    h3 "Headless" CMS
    p Vous publiez r√©guli√®rement du contenu sur votre site ? Fiches produits, actualit√©s, articles, marketing √©ditorial ... Votre Content Manager souhaite conserver une interface fonctionnelle et ergonomique qui lui permettra de continuer √† travailler comme il le faisait avant, avec un outil comme WordPress ou Drupal ?
    p Tout cela reste possible si l‚Äôon fait travailler votre site statique main dans la main avec un "Headless CMS". C‚Äôest √† dire un CMS qui se focalise sur la gestion des contenus, et qui se contente d'une API en fa√ßade.
    p Il existe un tr√®s grand nombre de r√©f√©rences, telles que Contentful, DatoCMS, Rooftop, Built.io, ... Certains de ces CMS modernes supportent les requ√™tes GraphQL et nombreux sont ceux qui incluent un premier niveau d‚Äôoffre totalement gratuit.
    strong N'h√©sitez pas √† me contacter pour faire le point sur votre projet !
